[{"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\main.ts":"1","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\App.vue":"2","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\store\\index.ts":"3","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\router\\index.ts":"4","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\NavView.vue":"5","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\OvertimeView.vue":"6","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\BookView.vue":"7","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\ReturnView.vue":"8","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\RegisterView.vue":"9","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\UserView.vue":"10","D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\LoginView.vue":"11"},{"size":389,"mtime":1703854628084,"results":"12","hashOfConfig":"13"},{"size":347,"mtime":1703854628083,"results":"14","hashOfConfig":"13"},{"size":145,"mtime":1703854628084,"results":"15","hashOfConfig":"13"},{"size":1520,"mtime":1704027204995,"results":"16","hashOfConfig":"13"},{"size":4706,"mtime":1704027176192,"results":"17","hashOfConfig":"13"},{"size":7113,"mtime":1704027705727,"results":"18","hashOfConfig":"13"},{"size":8877,"mtime":1704026663989,"results":"19","hashOfConfig":"13"},{"size":8221,"mtime":1704028173442,"results":"20","hashOfConfig":"13"},{"size":6395,"mtime":1704023492250,"results":"21","hashOfConfig":"13"},{"size":5601,"mtime":1703854628084,"results":"22","hashOfConfig":"13"},{"size":4032,"mtime":1704023582184,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"u3mo66",{"filePath":"26","messages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"34","messages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"36","messages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\main.ts",[],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\App.vue",[],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\store\\index.ts",[],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\router\\index.ts",[],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\NavView.vue",["48","49","50"],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\OvertimeView.vue",["51"],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\BookView.vue",["52","53","54","55","56","57"],"<template>\n  <div class=\"book\">\n    <el-container>\n      <el-main>\n        <!--        图书操作栏-->\n        <el-row class=\"book-header\">\n          <el-col :span=\"4\" class=\"search-page-pane\">\n            <el-select\n              v-model=\"pageSize\"\n              placeholder=\"数据显示\"\n              @change=\"changeSize\"\n              class=\"search-size\"\n            >\n              <el-option\n                v-for=\"item in sizeOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              >\n              </el-option>\n            </el-select>\n          </el-col>\n          <el-col :span=\"16\" class=\"search-input-pane\">\n            <el-row>\n              <el-col :span=\"4\">\n                <el-select\n                  v-model=\"searchModel\"\n                  placeholder=\"搜索类型\"\n                  @change=\"changeSearch\"\n                  class=\"search-size\"\n                >\n                  <el-option\n                    v-for=\"item in searchOptions\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\"\n                  >\n                  </el-option>\n                </el-select>\n              </el-col>\n              <el-col :span=\"14\">\n                <el-input\n                  placeholder=\"请输入搜索内容\"\n                  v-model=\"searchInput\"\n                  :suffix-icon=\"Search\"\n                  class=\"search-input\"\n                >\n                </el-input>\n              </el-col>\n              <el-col :span=\"6\">\n                <el-button\n                  type=\"primary\"\n                  class=\"search-button\"\n                  @click=\"searchButton\"\n                >\n                  搜索\n                </el-button>\n              </el-col>\n            </el-row>\n          </el-col>\n          <el-col :span=\"4\" class=\"search-page-pane\">\n            <el-button\n              type=\"primary\"\n              class=\"borrow-button\"\n              @click=\"borrowSelectedBook\"\n            >\n              借阅选中图书\n            </el-button>\n          </el-col>\n        </el-row>\n        <!--        图书表格栏-->\n        <el-row class=\"book-table\">\n          <el-col>\n            <el-table\n              :data=\"books\"\n              height=\"100%\"\n              empty-text=\"没有数据\"\n              @selection-change=\"updateSelection\"\n            >\n              <!-- 是否选中 -->\n              <el-table-column type=\"selection\" width=\"50\" />\n              <el-table-column fixed prop=\"id\" label=\"Id\" width=\"50\" />\n              <el-table-column prop=\"groups\" label=\"组名\" />\n              <el-table-column prop=\"name\" label=\"书名\" />\n              <el-table-column prop=\"author\" label=\"作者\" />\n              <el-table-column prop=\"press\" label=\"出版社\" />\n              <el-table-column prop=\"price\" label=\"价格(人民币)\" />\n              <el-table-column prop=\"quantity\" label=\"数量(本)\" />\n              <el-table-column prop=\"isbn\" label=\"ISBN号码\" />\n              <!-- 借阅按钮 -->\n              <el-table-column fixed=\"right\" label=\"操作\">\n                <template #default=\"{ row }\">\n                  <el-button @click=\"borrowBook(row, true)\" type=\"text\"\n                    >借阅</el-button\n                  >\n                </template>\n              </el-table-column>\n            </el-table>\n            <el-pagination\n              background\n              v-model:current-page=\"pageNum\"\n              v-model:page-size=\"pageSize\"\n              layout=\"prev, pager, next\"\n              :total=\"pageTotal\"\n              @current-change=\"page\"\n            >\n            </el-pagination>\n          </el-col>\n        </el-row>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive, ref } from \"vue\";\nimport { Search } from \"@element-plus/icons-vue\";\nimport axios from \"axios\";\nimport jsCookie from \"js-cookie\";\nimport { ElMessageBox } from \"element-plus\";\n\n// 获取图书数据\nlet books = ref();\nconst getBook = () => {\n  axios\n    .get(\"http://localhost:8888/book/\" + pageNum.value + \"/\" + pageSize.value)\n    .then((resp) => {\n      books.value = resp.data.content;\n      books.value.forEach((book: any) => {\n        book[\"selected\"] = false;\n      });\n      pageTotal.value = resp.data.totalElements;\n      // console.log(resp.data.content);\n    });\n};\n\n// 显示数据数量选项\nlet pageNum = ref(1);\nlet pageSize = ref(10);\nlet pageTotal = ref(0);\nconst page = (val: number) => {\n  pageNum.value = val;\n  if (searchInput.value == undefined) {\n    getBook();\n  } else {\n    searchBook();\n  }\n};\n\n// 数据显示框\nlet sizeOptions = [\n  {\n    value: 10,\n    label: \"10条数据/页\",\n  },\n  {\n    value: 50,\n    label: \"50条数据/页\",\n  },\n  {\n    value: 100,\n    label: \"100条数据/页\",\n  },\n];\n\n// 修改显示数据量\nconst changeSize = (value: number) => {\n  pageSize.value = value;\n  if (searchInput.value == undefined) {\n    getBook();\n  } else {\n    searchBook();\n  }\n};\n\n// 搜索框选项\nlet searchModel = ref(\"name\");\nlet searchOptions = [\n  {\n    value: \"name\",\n    label: \"图书名称\",\n  },\n  {\n    value: \"author\",\n    label: \"作者名称\",\n  },\n  {\n    value: \"press\",\n    label: \"出版社名称\",\n  },\n  {\n    value: \"isbn\",\n    label: \"ISBN号码\",\n  },\n];\nconst changeSearch = (value: string) => {\n  searchModel.value = value;\n};\n\n// 搜索框数据\nconst searchInput = ref();\n// 搜索框按钮\nconst searchButton = () => {\n  pageNum.value = 1;\n  searchBook();\n};\n// 搜索图书\nconst searchBook = () => {\n  if (searchInput.value != \"\") {\n    axios\n      .get(\n        \"http://localhost:8888/book/search/\" +\n          searchModel.value +\n          \"/\" +\n          searchInput.value +\n          \"/\" +\n          pageNum.value +\n          \"/\" +\n          pageSize.value\n      )\n      .then((resp) => {\n        books.value = resp.data.content;\n        pageTotal.value = resp.data.totalElements;\n      });\n  } else {\n    getBook();\n  }\n};\n\n// 用户名\nlet username = jsCookie.get(\"username\");\nconst userInfo = reactive({\n  name: jsCookie.get(\"username\"),\n  idCard: jsCookie.get(\"idCard\"),\n  phone: jsCookie.get(\"phone\"),\n});\n\nconst updateSelection = (selectedRows: string | any[]) => {\n  books.value.forEach((book: any) => {\n    book.selected = selectedRows.includes(book);\n  });\n};\n\nconst borrowBook = (row: any, messageEnabled: boolean) => {\n  let statusCode = 0;\n  axios\n    .post(\"http://localhost:8888/borrow/\" + row[\"isbn\"], userInfo)\n    .then((resp) => {\n      statusCode = resp.data.statusCode;\n      if (messageEnabled) {\n        // 借阅成功\n        if (statusCode == 1) {\n          ElMessageBox.alert(\"借阅成功\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n        // 借阅失败\n        if (statusCode == 0) {\n          ElMessageBox.alert(\"借阅失败，请重新借阅\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n        // 借阅失败，库存不足\n        if (statusCode == 2) {\n          ElMessageBox.alert(\"借阅失败，库存不足\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n        // 借阅失败，卡号不存在\n        if (statusCode == 3) {\n          ElMessageBox.alert(\"借阅失败，卡号不存在\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n        // 借阅失败，用户可借阅数量已达上限\n        if (statusCode == 4) {\n          ElMessageBox.alert(\"借阅失败，用户可借阅数量已达上限\", \"信息\", {\n            confirmButtonText: \"确认\",\n          });\n        }\n      }\n    });\n  return statusCode;\n};\n\nconst borrowSelectedBook = () => {\n  const selectedBooks = books.value.filter((book: any) => {\n    return book[\"selected\"] == true;\n  });\n  console.log(selectedBooks);\n  let statusCode = 0;\n  if (selectedBooks.length == 0) {\n    ElMessageBox.alert(\"请选择要借阅的图书\", \"信息\", {\n      confirmButtonText: \"确认\",\n    });\n  } else {\n    selectedBooks.forEach((book: any) => {\n      statusCode = borrowBook(book, false);\n      if (statusCode == 1) {\n        book[\"selected\"] = false;\n      }\n    });\n  }\n  if (statusCode == 1) {\n    ElMessageBox.alert(\"借阅成功\", \"信息\", {\n      confirmButtonText: \"确认\",\n    });\n  } else {\n    ElMessageBox.alert(\"借阅失败，请手动重新借阅\", \"信息\", {\n      confirmButtonText: \"确认\",\n    });\n  }\n};\n\n// 初始化\nconst init = () => {\n  // 获取图书\n  axios.get(\"http://localhost:8888/user/get/\" + username).then((resp) => {\n    userInfo.name = resp.data.name;\n    userInfo.idCard = resp.data.idCard;\n    userInfo.phone = resp.data.phone;\n    console.log(resp.data);\n    getBook();\n  });\n};\ninit();\n</script>\n\n<style lang=\"scss\">\n@import \"../assets/css/book\";\n</style>\n",[],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\ReturnView.vue",["58","59","60","61","62"],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\RegisterView.vue",[],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\UserView.vue",[],"D:\\Springboot-Vue-Libro-Gestion\\WebUI\\library-user\\src\\views\\LoginView.vue",[],{"ruleId":"63","severity":1,"message":"64","line":112,"column":23,"nodeType":"65","messageId":"66","endLine":112,"endColumn":26,"suggestions":"67"},{"ruleId":"63","severity":1,"message":"64","line":112,"column":34,"nodeType":"65","messageId":"66","endLine":112,"endColumn":37,"suggestions":"68"},{"ruleId":"63","severity":1,"message":"64","line":146,"column":24,"nodeType":"65","messageId":"66","endLine":146,"endColumn":27,"suggestions":"69"},{"ruleId":"63","severity":1,"message":"64","line":203,"column":34,"nodeType":"65","messageId":"66","endLine":203,"endColumn":37,"suggestions":"70"},{"ruleId":"63","severity":1,"message":"64","line":129,"column":34,"nodeType":"65","messageId":"66","endLine":129,"endColumn":37,"suggestions":"71"},{"ruleId":"63","severity":1,"message":"64","line":238,"column":49,"nodeType":"65","messageId":"66","endLine":238,"endColumn":52,"suggestions":"72"},{"ruleId":"63","severity":1,"message":"64","line":239,"column":30,"nodeType":"65","messageId":"66","endLine":239,"endColumn":33,"suggestions":"73"},{"ruleId":"63","severity":1,"message":"64","line":244,"column":26,"nodeType":"65","messageId":"66","endLine":244,"endColumn":29,"suggestions":"74"},{"ruleId":"63","severity":1,"message":"64","line":287,"column":51,"nodeType":"65","messageId":"66","endLine":287,"endColumn":54,"suggestions":"75"},{"ruleId":"63","severity":1,"message":"64","line":297,"column":34,"nodeType":"65","messageId":"66","endLine":297,"endColumn":37,"suggestions":"76"},{"ruleId":"63","severity":1,"message":"64","line":213,"column":49,"nodeType":"65","messageId":"66","endLine":213,"endColumn":52,"suggestions":"77"},{"ruleId":"63","severity":1,"message":"64","line":214,"column":32,"nodeType":"65","messageId":"66","endLine":214,"endColumn":35,"suggestions":"78"},{"ruleId":"63","severity":1,"message":"64","line":223,"column":32,"nodeType":"65","messageId":"66","endLine":223,"endColumn":35,"suggestions":"79"},{"ruleId":"63","severity":1,"message":"64","line":264,"column":53,"nodeType":"65","messageId":"66","endLine":264,"endColumn":56,"suggestions":"80"},{"ruleId":"63","severity":1,"message":"64","line":274,"column":34,"nodeType":"65","messageId":"66","endLine":274,"endColumn":37,"suggestions":"81"},"@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["82","83"],["84","85"],["86","87"],["88","89"],["90","91"],["92","93"],["94","95"],["96","97"],["98","99"],["100","101"],["102","103"],["104","105"],["106","107"],["108","109"],["110","111"],{"messageId":"112","fix":"113","desc":"114"},{"messageId":"115","fix":"116","desc":"117"},{"messageId":"112","fix":"118","desc":"114"},{"messageId":"115","fix":"119","desc":"117"},{"messageId":"112","fix":"120","desc":"114"},{"messageId":"115","fix":"121","desc":"117"},{"messageId":"112","fix":"122","desc":"114"},{"messageId":"115","fix":"123","desc":"117"},{"messageId":"112","fix":"124","desc":"114"},{"messageId":"115","fix":"125","desc":"117"},{"messageId":"112","fix":"126","desc":"114"},{"messageId":"115","fix":"127","desc":"117"},{"messageId":"112","fix":"128","desc":"114"},{"messageId":"115","fix":"129","desc":"117"},{"messageId":"112","fix":"130","desc":"114"},{"messageId":"115","fix":"131","desc":"117"},{"messageId":"112","fix":"132","desc":"114"},{"messageId":"115","fix":"133","desc":"117"},{"messageId":"112","fix":"134","desc":"114"},{"messageId":"115","fix":"135","desc":"117"},{"messageId":"112","fix":"136","desc":"114"},{"messageId":"115","fix":"137","desc":"117"},{"messageId":"112","fix":"138","desc":"114"},{"messageId":"115","fix":"139","desc":"117"},{"messageId":"112","fix":"140","desc":"114"},{"messageId":"115","fix":"141","desc":"117"},{"messageId":"112","fix":"142","desc":"114"},{"messageId":"115","fix":"143","desc":"117"},{"messageId":"112","fix":"144","desc":"114"},{"messageId":"115","fix":"145","desc":"117"},"suggestUnknown",{"range":"146","text":"147"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"146","text":"148"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",{"range":"149","text":"147"},{"range":"149","text":"148"},{"range":"150","text":"147"},{"range":"150","text":"148"},{"range":"151","text":"147"},{"range":"151","text":"148"},{"range":"152","text":"147"},{"range":"152","text":"148"},{"range":"153","text":"147"},{"range":"153","text":"148"},{"range":"154","text":"147"},{"range":"154","text":"148"},{"range":"155","text":"147"},{"range":"155","text":"148"},{"range":"156","text":"147"},{"range":"156","text":"148"},{"range":"157","text":"147"},{"range":"157","text":"148"},{"range":"158","text":"147"},{"range":"158","text":"148"},{"range":"159","text":"147"},{"range":"159","text":"148"},{"range":"160","text":"147"},{"range":"160","text":"148"},{"range":"161","text":"147"},{"range":"161","text":"148"},{"range":"162","text":"147"},{"range":"162","text":"148"},[3063,3066],"unknown","never",[3074,3077],[3618,3621],[5360,5363],[4141,4144],[6009,6012],[6050,6053],[6144,6147],[7310,7313],[7577,7580],[5560,5563],[5603,5606],[5802,5805],[6944,6947],[7211,7214]]